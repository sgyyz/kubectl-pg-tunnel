# kubectl-pg-tunnel Configuration File
# Copy this file to ~/.config/kubectl-pg-tunnel/config.yaml and customize

# ==============================================================================
# GLOBAL SETTINGS
# ==============================================================================
# These settings apply to all environments unless overridden

settings:
  # Kubernetes namespace where jump pods will be created
  namespace: default

  # Docker image for the jump pod (must have socat installed)
  jump-pod-image: alpine/socat:latest

  # Timeout in seconds to wait for jump pod to become ready
  jump-pod-wait-timeout: 60

  # Local port to forward to (can be overridden with --local-port flag)
  local-port: 5432

  # Remote PostgreSQL port (standard is 5432)
  db-port: 5432

# ==============================================================================
# ENVIRONMENTS
# ==============================================================================
# Define your environments with their Kubernetes contexts and databases

environments:
  # Staging environment
  staging:
    # Kubernetes context name (get with: kubectl config get-contexts)
    k8s-context: my-staging-cluster

    # Database hosts accessible from the staging cluster
    databases:
      user-db: user-db.staging.internal.example.com
      order-db: order-db.staging.internal.example.com
      analytics-db: analytics-db.staging.internal.example.com

  # Production environment
  production:
    k8s-context: my-production-cluster

    databases:
      user-db: user-db.prod.internal.example.com
      order-db: order-db.prod.internal.example.com
      analytics-db: analytics-db.prod.internal.example.com
      # You can have different databases in different environments
      payment-db: payment-db.prod.internal.example.com

  # Development environment (optional)
  dev:
    k8s-context: my-dev-cluster

    databases:
      main-db: postgres.dev.internal.example.com

# ==============================================================================
# USAGE EXAMPLES
# ==============================================================================
#
# Once configured, use the plugin like this:
#
#   # Connect to staging user database
#   kubectl pg-tunnel --env staging --db user-db
#
#   # Connect to production analytics database
#   kubectl pg-tunnel --env production --db analytics-db
#
#   # Connect with custom local port
#   kubectl pg-tunnel --env staging --db order-db --local-port 5433
#
#   # List all environments and databases
#   kubectl pg-tunnel ls
#
#   # List databases for staging environment
#   kubectl pg-tunnel ls staging
#
# ==============================================================================
# CUSTOMIZATION NOTES
# ==============================================================================
#
# 1. Update k8s-context values to match your kubectl contexts
#    Get your contexts with: kubectl config get-contexts
#
# 2. Update database hostnames to match your actual database hosts
#    These hosts must be accessible from within your Kubernetes cluster
#
# 3. Add more environments and databases as needed
#
# 4. Make sure your service account has permissions to create/delete pods
#    in the specified namespace
#
# For security:
# - Use read-only database users when possible
# - Use replica databases for analytics queries
# - Be careful with production database access
# - Consider using network policies to restrict jump pod access
#
# ==============================================================================
